<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Angular Classy</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/png" href="favicon.png">

        <link href='http://fonts.googleapis.com/css?family=Signika:600|Inconsolata' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="styles/main.css">
    </head>
    <body>
        <!--[if lt IE 9]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <header>
            <h1><img src="images/logo.svg" title="Angular Classy" alt="Angular Classy logo" width="362" height="149"></h1>
        </header>

        <div class="main-content">
            <h2>Cleaner class-based controllers for AngularJS</h2>

            <div class="features">
                <h3><i class="icon-align-left"></i> Class-based</h3>
                <p>As your Angular controller grows, it can start to get unwieldy and difficult to structure.</p>

                <p><span class="hide-on-small-devices">The code to the right is a <strong>Classy</strong> controller based on the <a href="http://todomvc.com/" target="_blank">TodoMVC</a> project. Take a look, </span><strong>Classy</strong> keeps your controllers clean and structured.</p>

                <p class="hide-on-small-devices"><strong>Hover your cursor over the code on the right for comments and explanations</strong>.</p>

                <hr>

                <h3><i class="icon-coffee"></i> Plays nicely with Coffeescript <em>and</em> Javascript</h3>

                <p>Classy works nicely with Coffeescript's <code class="inline-code">class</code> and <code class="inline-code">extends</code> syntax. Not everybody likes to party with Coffeescript though, for vanilla Javascript folks there's a convenient <code class="inline-code">classyController.create</code> Javascript method. Whoop, everybody is invited to the party!</p>

                <p><a href="#" id="toggle-language">Switch code examples to <span class="coffeescript-code">Javascript</span> <span class="javascript-code hide">Coffeescript</span></a></p>

                <hr>

                <h3><i class="icon-pencil"></i> No more annotating your dependencies</h3>

                <p>This is a big-ee. Angular veterans will know that if you want your Angular code to work with minifiers then you have to annotate your dependencies (i.e. list your dependencies twice), like so (<strong>without Classy</strong>):</p>

                <pre class="block-code coffeescript-code"><code>app.<span class="class">controller</span> '<span class="string">AppCtrl</span>',
  ['<span class="string">$scope</span>', '<span class="string">$location</span>', '<span class="string">$http</span>',
  ($scope, $location, $http) <span class="class">-></span>
    <span class="comment"># ...</span>
]</code></pre>

                <pre class="block-code javascript-code hide"><code>app.<span class="class">controller</span>('<span class="string">AppCtrl</span>',
  ['<span class="string">$scope</span>', '<span class="string">$location</span>', '<span class="string">$http</span>',
  <span class="class">function(</span>$scope, $location, $http<span class="class">)</span> {
    <span class="comment">// ...</span>
}]);</code></pre>



                <p>Annotating your dependencies is annoying and also it's just not very DRY. If you want to add/remove a dependancy then you need to remember to do it in two places.</p>

                <p>In <strong>Classy</strong> you don't need to do that, it works with minifiers and your code remains DRY. Here's what it looks like <strong>with Classy</strong>:</p>
                                <pre class="block-code coffeescript-code"><code><span class="class">class</span> <span class="keyword">extends</span> app.classyController</span>
<span class="highlight">  <span class="var">@register</span> '<span class="string">TodoCtrl</span>',
  ['<span class="string">$scope</span>', '<span class="string">$location</span>', '<span class="string">todoStorage</span>']</code></pre>

                <pre class="block-code javascript-code hide"><code>app.classyController.<span class="class">create</span>('<span class="string">TodoCtrl</span>',
  ['<span class="string">$scope</span>', '<span class="string">$location</span>', '<span class="string">todoStorage</span>'], {

});</code></pre>

                <hr>

                <h3><i class="icon-code"></i> Functions are automatically added to the controller's <code>$scope</code></h3>

                <p>Most of the time when you add a function to a controller, you want it available on the <code>$scope</code>. This is so that you can easily call it in your html using directives like <code>ng-click</code>. Here's how it used to look <strong>without Classy</strong>:</p>

                <pre class="block-code coffeescript-code"><code><span class="fn">$scope.editTodo</span> = (todo) <span class="class">-></span> <span class="comment">#...</span></code></pre>

                <pre class="block-code javascript-code hide"><code><span class="fn">$scope.editTodo</span> = <span class="class">function(</span>todo<span class="class">)</span> {
  <span class="comment">//...</span>
}</code></pre>

                <p>and now <strong>with Classy</strong>:</p>
                <pre class="block-code coffeescript-code"><code><span class="fn">editTodo</span>: (todo) <span class="class">-></span> <span class="comment">#...</span></code></pre>

                <pre class="block-code javascript-code hide"><code><span class="fn">editTodo</span>: <span class="class">function(</span>todo<span class="class">)</span> {
  <span class="comment">//...</span>
}</code></pre>


                <p>If you don't want the function to be on the <code>$scope</code> then just prefix it with an underscore character (<code>_</code>).</p>

                <hr>

                <h3><i class="icon-wristwatch"></i> Special object for <code>$watch</code> listeners</h3>

                <p>Instead of polluting your <code>init</code> method with lots of calls to <code>$scope.$watch</code>, you can put them in a watch object instead:</p>

                <pre class="block-code coffeescript-code"><code><span class="var">watch</span>:
  '<span class="string">location.path()</span>': (newValue, oldValue) <span class="class">-></span>
    <span class="comment"># ...</span>

  '<span class="string">{object}todos</span>': (newValue, oldValue) <span class="class">-></span>
    <span class="comment"># ...</span>
</code></pre>

                <pre class="block-code javascript-code hide"><code><span class="var">watch</span>: {
  '<span class="string">location.path()</span>': <span class="class">function(</span>newValue, oldValue<span class="class">)</span> {
    <span class="comment">// ...</span>
  },
  '<span class="string">{object}todos</span>': <span class="class">function (</span>newValue, oldValue<span class="class">)</span> {
    <span class="comment">// ...</span>
  }
}</code></pre>

                <p>Notice the <code>{object}</code> keyword in the second listener above. This allows you to easily specify the type of watcher to use. This is much more explicit than Angular's approach. Here is a table of the available keywords:</p>

                <table>
                    <thead>
                        <tr>
                            <th>Keyword</th>
                            <th>$watch Type</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <code>{collection}</code> or <code>{shallow}</code>
                            </td>
                            <td>
                                <a href="http://docs.angularjs.org/api/ng.%24rootScope.Scope#methods_%24watch_example_parameters" target="_blank"><code>$watchCollection(..)</code></a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>{object}</code> or <code>{deep}</code>
                            </td>
                            <td>
                                <a href="http://docs.angularjs.org/api/ng.%24rootScope.Scope#methods_%24watchcollection" target="_blank"><code>$watch(.., objectEquality = true)</code></a>
                            </td>
                        </tr>
                    </tbody>
                </table>


                <hr>

                <h3><i class="icon-resize-small"></i> Only 1KB (gzipped and minified)</h3>

                <p>it's super tiny so you don't have to worry about it adding weight to your application. Next up, I'm going to performance test it against standard (non-Classy) Angular controllers (initial testing seems to indicate that they perform roughly the same).</p>

                <hr>

            </div>

            <div class="code-editor-container">
                <div class="code-editor">
                    <div class="toolbar">
                        <div class="close"></div>
                        <div class="minimize"></div>
                        <div class="zoom"></div>
                        todo-controller<span class="coffeescript-code">.coffee</span><span class="javascript-code hide">.js</span>
                        <span class="sub-title">â€”
                            <select id="select-language">
                                <option name="coffeescript">Coffeescript</option>
                                <option name="coffeescript">Javascript</option>
                            </select>
                        </span>
                    </div>
                    <div class="editor">
    <pre class="coffeescript-code"><code><section><span class="highlight"><span class="var">todomvc</span> = <span class="var">angular.module</span> '<span class="string">todomvc</span>', ['<span class="string">classy</span>']</span><div class="code-tip"><div>Add 'classy' to your app modules</div></div></section>

    <section><span class="highlight"><span class="class">class</span> <span class="keyword">extends</span> todomvc.classyController</span>
<span class="highlight">  <span class="var">@register</span> '<span class="string">TodoCtrl</span>', [
    '<span class="string">$scope</span>'
    '<span class="string">$location</span>'
    '<span class="string">todoStorage</span>'
    '<span class="string">filterFilter</span>'
  ]</span><div class="code-tip"><div>Register your controller and inject your dependencies. Injecting dependencies with Classy plays nice with minifiers, you don't need to annotate your dependencies (i.e. list dependencies twice) and your code remains DRY.</div></div></section>

    <section>  <span class="highlight"><span class="fn">init</span>: <span class="class">-></span></span>
    @todos = @$scope.todos = @todoStorage.get()
    @$scope.newTodo = ''
    @$scope.location = @$location<div class="code-tip"><div>An init method for your initialization code. Who'd have thunk it?<br>You can access your dependencies using the class-wide <code>@</code> symbol.</div></div></section>

    <section>  <span class="highlight"><span class="var">watch:</span></span>
    <span class="highlight">'<span class="string">location.path()</span>': (path) <span class="class">-></span></span>
      @$scope.statusFilter =
        if (path is '/active') then completed: false
        else if (path is '/completed') then completed: true

    <span class="highlight">'<span class="string">{object}todos</span>': '<span class="string">_onTodoChange</span>'</span><div class="code-tip"><div>Instead of polluting your init method with lots of calls to <code>$scope.$watch</code>, you can put your watchers in the watch object instead. If you want to watch an object or collection just use the <code>{object}</code> or <code>{collection}</code> keyword.</div></div></section>

    <section>  <span class="highlight"><span class="fn">addTodo</span>: <span class="class">-></span></span>
    newTodo = @$scope.newTodo.trim()
    @todos.push
      title: newTodo
      completed: false<div class="code-tip"><div>Most of the time when you add a function to a controller, you want it available on the <code>$scope</code>. Classy automatically puts the function in your <code>$scope</code> so you can easily access it using directives like ng-click</div></div></section>

    <section>  <span class="highlight"><span class="fn">_onTodoChange</span>: (newValue, oldValue) <span class="class">-></span></span>
    @$scope.remainingCount = @filterFilter(@todos, { completed: false }).length<div class="code-tip"><div>Prefix the function name with an underscore and Classy wont add it to the <code>$scope</code>.</div></div></section>

</code></pre>

<pre class="javascript-code hide"><code><section><span class="highlight"><span class="fn">var</span> <span class="var">todomvc</span> = <span class="var">angular.module</span>('<span class="string">todomvc</span>', ['<span class="string">classy</span>']);</span><div class="code-tip"><div>Add 'classy' to your app modules</div></div></section>

<section><span class="highlight">todomvc.classyController.<span class="class">create</span>('<span class="string">TodoCtrl</span>', [
   '<span class="string">$scope</span>',
   '<span class="string">$location</span>',
   '<span class="string">todoStorage</span>',
   '<span class="string">filterFilter</span>'
  ], {</span><div class="code-tip"><div>Register your controller and inject your dependencies. Injecting dependencies with Classy plays nice with minifiers, you don't need to annotate your dependencies (i.e. list dependencies twice) and your code remains DRY.</div></div></section>

      <section>   <span class="highlight"><span class="fn">init</span>: <span class="class">function()</span> {</span>
     this.todos = this.$scope.todos = this.todoStorage.get();
     this.$scope.newTodo = '';
     this.$scope.location = this.$location;
   },<div class="code-tip"><div>An init method for your initialization code. Who'd have thunk it?<br>You can access your dependencies using the class-wide <code>this</code> symbol.</div></div></section>

  <section>  <span class="highlight"><span class="var">watch:</span> {</span>
    <span class="highlight">'<span class="string">location.path()</span>': <span class="class">function(</span>path<span class="class">)</span> {</span>
      this.$scope.statusFilter = (path === '/active') ?
        { completed: false } : (path === '/completed') ?
        { completed: true };
    },

    <span class="highlight">'<span class="string">{object}todos</span>': '<span class="string">_onTodoChange</span>'</span>
  }<div class="code-tip"><div>Instead of polluting your init method with lots of calls to <code>$scope.$watch</code>, you can put your watchers in the watch object instead. If you want to watch an object or collection just use the <code>{object}</code> or <code>{collection}</code> keyword.</div></div></section>

     <section>  <span class="highlight"><span class="fn">addTodo</span>: <span class="class">function()</span> {</span>
    newTodo = this.$scope.newTodo.trim();
    this.todos.push({
      title: newTodo,
      completed: false
    )};
  },<div class="code-tip"><div>Most of the time when you add a function to a controller, you want it available on the <code>$scope</code>. Classy automatically puts the function in your $scope so you can easily access it using directives like ng-click</div></div></section>

  <section>  <span class="highlight"><span class="fn">_onTodoChange</span>: <span class="class">function(</span>newValue, oldValue<span class="class">)</span> {</span>
    this.$scope.remainingCount = this.filterFilter(this.todos, { completed: false }).length;
  }<div class="code-tip"><div>Prefix the function name with an underscore and Classy wont add it to the <code>$scope</code>.</div></div></section>

});

</code></pre>

                    </div>
                </div>

            <section class="installation">
                <h3><i class="icon-download-cloud"></i> Installation</h3>
                <ol>
                    <li>
                        <div><a href="https://github.com/davej/angular-classy/zipball/master/">Download the latest release</a>.</div>
                        <div style="margin-top:5px;">Or install with bower: <code class="inline-code">bower install angular-classy</code></div>
                    </li>

                    <li>
                        Reference Classy <em>after</em> the reference to Angular<br>
<pre class="block-code"><code>&lt;<span class="var">script</span> <span class="fn">src</span>=&quot;<span class="string">assets/js/angular.js</span>&quot;&gt;&lt;/<span class="var">script</span>&gt;
&lt;<span class="var">script</span> <span class="fn">src</span>=&quot;<span class="string">assets/js/angular-classy.min.js</span>&quot;&gt;&lt;/<span class="var">script</span>&gt;</code></pre>
                    </li>

                    <li>
                        Add Classy to your application module
<pre class="block-code coffeescript-code"><code><span class="var">app</span> = <span class="var">angular.module</span> '<span class="string">app</span>', ['<span class="string">classy</span>']</span></code></pre>

<pre class="block-code javascript-code hide"><code><span class="fn">var</span> <span class="var">app</span> = <span class="var">angular.module</span>('<span class="string">app</span>', ['<span class="string">classy</span>']);</code></pre>
                    </li>

                    <li>That's it, you can create a Classy <code class="inline-code">class</code> like so:
<pre class="block-code coffeescript-code"><code><span class="class">class</span> <span class="keyword">extends</span> app.classyController
  <span class="var">@register</span> '<span class="string">MyCtrl</span>', ['<span class="string">$scope</span>']
</code></pre>

<pre class="block-code javascript-code hide"><code>app.classyController.<span class="class">create</span>('<span class="string">MyCtrl</span>', ['<span class="string">$scope</span>'], {

});</code></pre>
                </ol>
            </section>

           <section class="more-info">
                <h3><i class="icon-info"></i> More Info</h3>
                <ul>
                    <li><a href="https://github.com/davej/angular-classy">Github Repo</a></li>
                    <li>Test status:
                        <a href="https://travis-ci.org/davej/angular-classy">
                            <img src="https://api.travis-ci.org/davej/angular-classy.png" width="77" height="19">
                        </a>
                    </li>
                    <li>Author: <a href="https://twitter.com/DaveJ">Dave Jeffery</a></li>
                </ul>
            </section>

            </div>


        </div>

        <footer>
            &copy; Dave Jeffery 2014. Licensed under the MIT license. <span class="icons"><a href="https://github.com/davej/angular-classy"><i class="icon-github"></i></a> <a href="https://twitter.com/DaveJ"><i class="icon-twitter"></i></a>
        </footer>


        <script src="scripts/main.js"></script>
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-6949082-2');ga('send','pageview');
        </script>
    </body>
</html>